<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Processos em tempo real</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #111;
            color: #eee;
        }
        #out {
            white-space: pre;
            background: #222;
            padding: 15px;
            border-radius: 8px;
            overflow: auto;
            max-height: 90vh;
        }
    </style>
</head>

<body>
    <h2>Processos sendo monitorados</h2>
    <pre id="out">Conectando...</pre>

    <script>
        const ws = new WebSocket("ws://127.0.0.1:8080/ws");

        ws.onopen = () => {
            console.log("Conectado!");
            document.getElementById("out").textContent = "Aguardando dados...";
        };

        ws.onmessage = (event) => {
            try {
                const json = JSON.parse(event.data);
                document.getElementById("out").textContent =
                    JSON.stringify(json, null, 2);
            } catch (e) {
                document.getElementById("out").textContent =
                    "Erro ao parsear JSON: " + e + "\nRaw: " + event.data;
            }
        };

        ws.onerror = (err) => {
            document.getElementById("out").textContent =
                "Erro WebSocket: " + err;
        };

        ws.onclose = () => {
            document.getElementById("out").textContent = "Conex√£o fechada.";
        };
    </script>
</body>
</html>
